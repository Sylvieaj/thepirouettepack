<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Members</title><link rel="stylesheet" href="style.css"></head><body>
<header><img src="assets/logo.jpeg" class="logo" alt="logo"><div class="tagline">made by dancers for dancers</div></header>
<div class="bow-nav">ğŸ€</div>
<div class="container">
<h1 class="preppy-title">ğŸ€ Become a Member ğŸ€</h1>
<form id="signupForm" class="preppy-form">
  <input class="input-field" id="signupEmail" type="email" placeholder="ğŸ’Œ Your email" required>
  <input class="input-field" id="signupPassword" type="password" placeholder="ğŸ”’ Password (6+ chars)" required>
  <button class="shop-btn" type="submit">âœ¨ Sign Up âœ¨</button>
</form>
<div class="bow-divider">ğŸ€</div>
<h2 class="preppy-title">Already a member?</h2>
<form id="loginForm" class="preppy-form">
  <input class="input-field" id="loginEmail" type="email" placeholder="ğŸ’Œ Your email" required>
  <input class="input-field" id="loginPassword" type="password" placeholder="ğŸ”’ Password" required>
  <button class="shop-btn" type="submit">ğŸ’… Log In ğŸ’…</button>
</form>
<p id="member-message" class="note"></p>
</div>
<script type="module">
  import { auth } from "./firebase.js";
  import { createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";

  const signupForm = document.getElementById('signupForm');
  const loginForm = document.getElementById('loginForm');
  const message = document.getElementById('member-message');

  signupForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('signupEmail').value;
    const password = document.getElementById('signupPassword').value;
    try {
      await createUserWithEmailAndPassword(auth, email, password);
      message.textContent = 'ğŸ‰ Signed up! Check your email.';
      message.style.color = 'green';
      // send email notification to shop owner (vercel function)
      fetch('/api/sendEmail', {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({type:'signup', email})});
    } catch (err) {
      message.textContent = 'âš ï¸ ' + err.message;
      message.style.color = 'red';
    }
  });

  loginForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = document.getElementById('loginEmail').value;
    const password = document.getElementById('loginPassword').value;
    try {
      await signInWithEmailAndPassword(auth, email, password);
      message.textContent = 'ğŸ’– Logged in!';
      message.style.color = 'green';
    } catch (err) {
      message.textContent = 'âš ï¸ ' + err.message;
      message.style.color = 'red';
    }
  });

  onAuthStateChanged(auth, (user) => {
    if (user) {
      message.textContent = 'Welcome back!';
    }
  });
</script>
</body></html>
